<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details - Samriddhi</title>

  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">

  <style>
    body { background-color: #f8f9fa; }

    .fade-in { animation: fadeIn 1s ease-in-out; }
    @keyframes fadeIn { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }

    .product-img { border-radius: 14px; cursor: pointer; transition: transform .4s ease, box-shadow .4s ease; }
    .product-img:hover { transform: scale(1.06); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }

    #lightboxOverlay { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.85); display:none; align-items:center; justify-content:center; z-index:9999; }
    #lightboxOverlay img { width:80%; max-width:500px; border-radius:10px; }

    .btn-added { background-color: #dc3545; color: white; }
    body.dark-mode { background:#1c1c1c; color:#eee; }
  </style>
</head>
<body>

<!-- Navbar -->
<div id="navbar-placeholder"></div>
<script src="assets/js/nav.js"></script>

<!-- Lightbox -->
<div id="lightboxOverlay" onclick="this.style.display='none'">
  <img id="lightboxImage" src="">
</div>

<div class="container py-4 fade-in">
  <div class="row g-5 align-items-center" id="productDetails">
    <div class="col-md-6 text-center">
      <img id="productImage" class="img-fluid product-img shadow" onclick="openLightbox()" />
    </div>

    <div class="col-md-6">
      <h2 id="productName" class="fw-bold mb-3"></h2>
      <h3 id="productPrice" class="text-danger fw-bold"></h3>
      <p id="productDesc" class="mt-3"></p>

      <div class="mt-4 d-flex gap-3 flex-wrap">
        <button id="addWishlistBtn" class="btn btn-outline-danger btn-lg px-4">❤️ Wishlist</button>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="footer text-center py-4">
  <button id="scrollTopBtn"><i class="bi bi-arrow-up"></i></button>
  <p class="text-white m-0">© 2025 Samriddhi. All Rights Reserved.</p>
</footer>

<!-- JS: Wishlist + Global Sync -->
<script src="assets/js/wishlist.js"></script>
<script src="assets/js/globalWishlistSync.js"></script>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const uniqueId = urlParams.get("id"); // uniqueId = type-id
  const [type, id] = uniqueId.split("-");

  fetch("data/products.json")
      .then(res => res.json())
      .then(data => {
          const item = data[type].find(p => p.id == id);

          document.getElementById("productImage").src = item.image;
          document.getElementById("productName").textContent = item.name;
          document.getElementById("productPrice").textContent = "₹" + item.price;
          document.getElementById("productDesc").textContent = item.desc;

          const btn = document.getElementById("addWishlistBtn");
          btn.dataset.uniqueid = uniqueId;
          btn.dataset.id = item.id;
          btn.dataset.type = type;
          btn.dataset.name = item.name;
          btn.dataset.img = item.image;
          btn.dataset.price = item.price;

          const wishlist = JSON.parse(localStorage.getItem("wishlist") || "[]");
          if (wishlist.some(i => i.uniqueId === uniqueId)) {
              btn.innerHTML = "✔ Added";
              btn.classList.add("btn-added");
          }
          btn.addEventListener("click", () => toggleWishlist(btn));
      });

  // Lightbox
  function openLightbox() {
      const img = document.getElementById("productImage").src;
      document.getElementById("lightboxImage").src = img;
      document.getElementById("lightboxOverlay").style.display = "flex";
  }

  // Dark mode restore
  document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("dark-mode") === "enabled") {
          document.body.classList.add("dark-mode");
      }
  });
</script>
</body>
</html>